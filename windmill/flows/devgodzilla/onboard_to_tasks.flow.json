{
  "summary": "Onboard GitHub Repo → Spec → Plan → Tasks (DevGodzilla API)",
  "description": "End-to-end workflow: create a DevGodzilla project, clone it, initialize .specify/, then generate spec/plan/tasks via DevGodzilla API.",
  "value": {
    "modules": [
      {
        "id": "onboard_project",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/project_onboard_api",
          "input_transforms": {
            "git_url": { "type": "javascript", "expr": "flow_input.git_url" },
            "project_name": { "type": "javascript", "expr": "flow_input.project_name" },
            "branch": { "type": "javascript", "expr": "flow_input.branch || 'main'" },
            "description": { "type": "javascript", "expr": "flow_input.description || ''" },
            "constitution_content": { "type": "javascript", "expr": "flow_input.constitution_content || ''" },
            "run_discovery_agent": { "type": "javascript", "expr": "flow_input.run_discovery_agent || false" }
          }
        },
        "input_transforms": {}
      },
      {
        "id": "speckit_specify",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_specify_api",
          "input_transforms": {
            "project_id": { "type": "javascript", "expr": "results.onboard_project.project_id" },
            "description": { "type": "javascript", "expr": "flow_input.feature_request" },
            "feature_name": { "type": "javascript", "expr": "flow_input.feature_name || ''" }
          }
        },
        "input_transforms": {}
      },
      {
        "id": "speckit_clarify",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_clarify_api",
          "input_transforms": {
            "project_id": { "type": "javascript", "expr": "results.onboard_project.project_id" },
            "spec_path": { "type": "javascript", "expr": "results.speckit_specify.spec_path" },
            "entries": { "type": "javascript", "expr": "flow_input.clarification_entries || []" },
            "notes": { "type": "javascript", "expr": "flow_input.clarification_notes || ''" }
          }
        },
        "input_transforms": {}
      },
      {
        "id": "speckit_plan",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_plan_api",
          "input_transforms": {
            "project_id": { "type": "javascript", "expr": "results.onboard_project.project_id" },
            "spec_path": { "type": "javascript", "expr": "results.speckit_specify.spec_path" }
          }
        },
        "input_transforms": {}
      },
      {
        "id": "speckit_checklist",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_checklist_api",
          "input_transforms": {
            "project_id": { "type": "javascript", "expr": "results.onboard_project.project_id" },
            "spec_path": { "type": "javascript", "expr": "results.speckit_specify.spec_path" }
          }
        },
        "input_transforms": {}
      },
      {
        "id": "speckit_tasks",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_tasks_api",
          "input_transforms": {
            "project_id": { "type": "javascript", "expr": "results.onboard_project.project_id" },
            "plan_path": { "type": "javascript", "expr": "results.speckit_plan.plan_path" }
          }
        },
        "input_transforms": {}
      },
      {
        "id": "speckit_analyze",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_analyze_api",
          "input_transforms": {
            "project_id": { "type": "javascript", "expr": "results.onboard_project.project_id" },
            "spec_path": { "type": "javascript", "expr": "results.speckit_specify.spec_path" },
            "plan_path": { "type": "javascript", "expr": "results.speckit_plan.plan_path" },
            "tasks_path": { "type": "javascript", "expr": "results.speckit_tasks.tasks_path" }
          }
        },
        "input_transforms": {}
      },
      {
        "id": "speckit_implement",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_implement_api",
          "input_transforms": {
            "project_id": { "type": "javascript", "expr": "results.onboard_project.project_id" },
            "spec_path": { "type": "javascript", "expr": "results.speckit_specify.spec_path" }
          }
        },
        "input_transforms": {}
      }
    ]
  },
  "schema": {
    "type": "object",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "properties": {
      "git_url": {
        "type": "string",
        "description": "GitHub repository URL (public or private if accessible)",
        "default": ""
      },
      "project_name": {
        "type": "string",
        "description": "DevGodzilla project name",
        "default": ""
      },
      "branch": {
        "type": "string",
        "description": "Branch to checkout",
        "default": "main"
      },
      "description": {
        "type": "string",
        "description": "Optional project description",
        "default": ""
      },
      "constitution_content": {
        "type": "string",
        "description": "Optional custom SpecKit constitution content",
        "default": ""
      },
      "feature_request": {
        "type": "string",
        "description": "Feature request text for spec generation",
        "default": ""
      },
      "feature_name": {
        "type": "string",
        "description": "Optional short feature name",
        "default": ""
      },
      "clarification_entries": {
        "type": "array",
        "description": "Optional clarification Q/A entries to append",
        "default": [],
        "items": {
          "type": "object",
          "properties": {
            "question": { "type": "string" },
            "answer": { "type": "string" }
          },
          "required": ["question", "answer"]
        }
      },
      "clarification_notes": {
        "type": "string",
        "description": "Optional clarification notes",
        "default": ""
      },
      "run_discovery_agent": {
        "type": "boolean",
        "description": "Run headless agent discovery during onboarding",
        "default": false
      }
    },
    "required": ["git_url", "project_name", "feature_request"]
  }
}
