{
  "summary": "Spec to Tasks Flow",
  "description": "Generate specification, implementation plan, and task breakdown for a project by calling the DevGodzilla API (via API-wrapper scripts).",
  "value": {
    "modules": [
      {
        "id": "speckit_specify",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_specify_api"
        },
        "input_transforms": {
          "project_id": {
            "type": "javascript",
            "expr": "flow_input.project_id"
          },
          "description": {
            "type": "javascript",
            "expr": "flow_input.feature_request"
          },
          "feature_name": {
            "type": "javascript",
            "expr": "flow_input.feature_name || ''"
          }
        }
      },
      {
        "id": "speckit_clarify",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_clarify_api"
        },
        "input_transforms": {
          "project_id": {
            "type": "javascript",
            "expr": "flow_input.project_id"
          },
          "spec_path": {
            "type": "javascript",
            "expr": "results.speckit_specify.spec_path"
          },
          "entries": {
            "type": "javascript",
            "expr": "flow_input.clarification_entries || []"
          },
          "notes": {
            "type": "javascript",
            "expr": "flow_input.clarification_notes || ''"
          }
        }
      },
      {
        "id": "speckit_plan",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_plan_api"
        },
        "input_transforms": {
          "project_id": {
            "type": "javascript",
            "expr": "flow_input.project_id"
          },
          "spec_path": {
            "type": "javascript",
            "expr": "results.speckit_specify.spec_path"
          }
        }
      },
      {
        "id": "speckit_checklist",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_checklist_api"
        },
        "input_transforms": {
          "project_id": {
            "type": "javascript",
            "expr": "flow_input.project_id"
          },
          "spec_path": {
            "type": "javascript",
            "expr": "results.speckit_specify.spec_path"
          }
        }
      },
      {
        "id": "speckit_tasks",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_tasks_api"
        },
        "input_transforms": {
          "project_id": {
            "type": "javascript",
            "expr": "flow_input.project_id"
          },
          "plan_path": {
            "type": "javascript",
            "expr": "results.speckit_plan.plan_path"
          }
        }
      },
      {
        "id": "speckit_analyze",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_analyze_api"
        },
        "input_transforms": {
          "project_id": {
            "type": "javascript",
            "expr": "flow_input.project_id"
          },
          "spec_path": {
            "type": "javascript",
            "expr": "results.speckit_specify.spec_path"
          },
          "plan_path": {
            "type": "javascript",
            "expr": "results.speckit_plan.plan_path"
          },
          "tasks_path": {
            "type": "javascript",
            "expr": "results.speckit_tasks.tasks_path"
          }
        }
      },
      {
        "id": "speckit_implement",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/speckit_implement_api"
        },
        "input_transforms": {
          "project_id": {
            "type": "javascript",
            "expr": "flow_input.project_id"
          },
          "spec_path": {
            "type": "javascript",
            "expr": "results.speckit_specify.spec_path"
          }
        }
      },
      {
        "id": "sync_to_sprint",
        "value": {
          "type": "script",
          "path": "u/devgodzilla/sync_tasks_api"
        },
        "input_transforms": {
          "sprint_id": {
            "type": "javascript",
            "expr": "flow_input.sprint_id"
          },
          "spec_path": {
            "type": "javascript",
            "expr": "results.speckit_tasks.tasks_path"
          }
        },
        "skip_failure": true
      }
    ]
  },
  "schema": {
    "type": "object",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "properties": {
      "project_id": {
        "type": "integer",
        "description": "Project ID",
        "default": 1
      },
      "feature_request": {
        "type": "string",
        "description": "Description of the feature to implement",
        "default": ""
      },
      "feature_name": {
        "type": "string",
        "description": "Optional feature slug/name",
        "default": ""
      },
      "clarification_entries": {
        "type": "array",
        "description": "Optional clarification Q/A entries to append",
        "default": [],
        "items": {
          "type": "object",
          "properties": {
            "question": { "type": "string" },
            "answer": { "type": "string" }
          },
          "required": ["question", "answer"]
        }
      },
      "clarification_notes": {
        "type": "string",
        "description": "Optional clarification notes",
        "default": ""
      },
      "sprint_id": {
        "type": "integer",
        "description": "Optional sprint to sync tasks to"
      }
    },
    "required": [
      "project_id",
      "feature_request"
    ]
  }
}
